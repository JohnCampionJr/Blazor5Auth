@page "/account/manage/PersonalData/Download"
@attribute [Authorize]
@inject IAuthService AuthService
@inject NavigationManager NavigationManager
@inject HttpClient Http

<TwHeader2>Download Personal Data</TwHeader2>

<TwSubCard>
    <textarea class="h-80" @bind="Body"></textarea>
</TwSubCard>

@code
{
    private string Body { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var response = await Http.PostAsJsonAsync("api/account/manage/downloadpersonaldata", new {});
        var result = await response.Content.ReadFromJsonAsync<Features.Account.Manage.PersonalData.QueryResult>();

        if (result.IsSuccessful)
        {
            Body = result.JsonData;
        }
    }
}
